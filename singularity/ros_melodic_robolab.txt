Bootstrap: docker
From: ros:melodic-robot

%help
    This image essentially contains ROS tuned for the teaching needs of the Czech Technical University, Faculty of Cybernetics. The main use is for the turtlebots in the Robolab (KN:E-130).

%files
    sudo /usr/bin/sudo

%runscript
    /opt/ros/robolab/devel/env.sh "$@"

%post
    packages="
    apt-utils
    build-essential
    crudini
    dialog
    git-gui
    mc
    nano
    net-tools
    nmap
    openssh-client
    openssh-server
    python-catkin-tools
    python-pip
    python-pip-whl
    python-rosinstall
    python-rosinstall-generator
    python-scipy
    python3-scipy
    python-virtualenv
    python-wstool
    python3-pip
    python3-scipy
    ros-melodic-desktop-full
    ros-melodic-octomap-ros
    ros-melodic-tf2-geometry-msgs
    ros-melodic-tf2-sensor-msgs
    screen
    sshpass
    terminator
    tmux
    tree
    vim
    wget
    "
    apt-get -y update && apt-get -y install $packages
    apt-get clean
    
    tmp="$(mktemp -d)"
    cd "$tmp"
    git clone https://gitlab.fel.cvut.cz/robolab/deploy.git
    ws=/opt/ros/robolab
    deploy/scripts/setup_catkin_workspace "$ws"
